{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, inject } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { NewspapersLastestComponent } from '../newspapers-lastest/newspapers-lastest.component';\nimport { NewspapersService } from '../newspapers.service';\nlet NewspapersComponent = class NewspapersComponent {\n  constructor(route, router, newspaperService) {\n    this.route = route;\n    this.router = router;\n    this.newspaperService = newspaperService;\n    this.currentPage = 0;\n    this.id = 1;\n    this.newspapersLastestList = [];\n    this.newspapersService = inject(NewspapersService);\n    this.isScrollingActive = true;\n    this.route.queryParams.subscribe(params => {\n      this.id = params['id'];\n      if (!this.id) {\n        this.id = 1;\n      }\n      this.currentPage = 0;\n      this.newspapersLastestList = []; // Reset the list\n      this.loadMoreNews();\n    });\n  }\n  ngOnInit() {\n    window.addEventListener('scroll', this.handleScroll.bind(this));\n  }\n  handleScroll() {\n    if (this.isScrollingActive) {\n      const scrollPosition = window.innerHeight + window.scrollY;\n      const totalHeight = document.documentElement.scrollHeight;\n      if (scrollPosition >= totalHeight - 360) {\n        this.currentPage++;\n        // Load the next page here, and append to the current list\n        this.loadMoreNews();\n      }\n    }\n  }\n  loadMoreNews() {\n    this.newspapersService.getAllNewspapersLastest(this.id, this.currentPage).then(newspapersLastestList => {\n      this.newspapersLastestList.push(...newspapersLastestList);\n    });\n  }\n};\nNewspapersComponent = __decorate([Component({\n  selector: 'app-newspapers',\n  standalone: true,\n  imports: [CommonModule, NewspapersLastestComponent],\n  styleUrls: ['./newspapers.component.css'],\n  template: `\n    <app-newspapers-lastest *ngFor=\"let newspapersLastest of newspapersLastestList\" [newspapersLastest]=\"newspapersLastest\"></app-newspapers-lastest>\n  `\n})], NewspapersComponent);\nexport { NewspapersComponent };","map":{"version":3,"names":["Component","inject","CommonModule","NewspapersLastestComponent","NewspapersService","NewspapersComponent","constructor","route","router","newspaperService","currentPage","id","newspapersLastestList","newspapersService","isScrollingActive","queryParams","subscribe","params","loadMoreNews","ngOnInit","window","addEventListener","handleScroll","bind","scrollPosition","innerHeight","scrollY","totalHeight","document","documentElement","scrollHeight","getAllNewspapersLastest","then","push","__decorate","selector","standalone","imports","styleUrls","template"],"sources":["C:\\Users\\nguye\\Videos\\frontend_newspapers-main\\src\\app\\newspapers\\newspapers.component.ts"],"sourcesContent":["import { Component, inject, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { CommonModule } from '@angular/common';\nimport { NewspapersLastestComponent } from '../newspapers-lastest/newspapers-lastest.component';\nimport { Newspaperslastest } from '../newspaperslastest';\nimport { NewspapersService } from '../newspapers.service';\n\n@Component({\n  selector: 'app-newspapers',\n  standalone: true,\n  imports: [CommonModule, NewspapersLastestComponent],\n  styleUrls: ['./newspapers.component.css'],\n  template: `\n    <app-newspapers-lastest *ngFor=\"let newspapersLastest of newspapersLastestList\" [newspapersLastest]=\"newspapersLastest\"></app-newspapers-lastest>\n  `\n})\nexport class NewspapersComponent implements OnInit {\n  currentPage = 0;\n  id = 1;\n  newspapersLastestList: Newspaperslastest[] = [];\n  newspapersService: NewspapersService = inject(NewspapersService);\n  isScrollingActive: boolean = true;\n  constructor(private route: ActivatedRoute, private router: Router, private newspaperService: NewspapersService) {\n    this.route.queryParams.subscribe(params => {\n      this.id = params['id'];\n      if (!this.id) {\n        this.id = 1;\n      }\n      this.currentPage = 0;\n      this.newspapersLastestList = []; // Reset the list\n      this.loadMoreNews();\n    });\n  }\n\n  ngOnInit() {\n    window.addEventListener('scroll', this.handleScroll.bind(this));\n  }\n\n  handleScroll() {\n    if(this.isScrollingActive){\n    const scrollPosition = window.innerHeight + window.scrollY;\n    const totalHeight = document.documentElement.scrollHeight;\n\n    if (scrollPosition >= totalHeight - 360) {\n\n      this.currentPage++;\n      // Load the next page here, and append to the current list\n      this.loadMoreNews();\n    }\n  }\n}\n  private loadMoreNews() {\n    this.newspapersService.getAllNewspapersLastest(this.id, this.currentPage).then((newspapersLastestList: Newspaperslastest[]) => {\n      this.newspapersLastestList.push(...newspapersLastestList);\n    });\n  }\n}\n"],"mappings":";AAAA,SAASA,SAAS,EAAEC,MAAM,QAAgB,eAAe;AAEzD,SAASC,YAAY,QAAQ,iBAAiB;AAC9C,SAASC,0BAA0B,QAAQ,oDAAoD;AAE/F,SAASC,iBAAiB,QAAQ,uBAAuB;AAWlD,IAAMC,mBAAmB,GAAzB,MAAMA,mBAAmB;EAM9BC,YAAoBC,KAAqB,EAAUC,MAAc,EAAUC,gBAAmC;IAA1F,KAAAF,KAAK,GAALA,KAAK;IAA0B,KAAAC,MAAM,GAANA,MAAM;IAAkB,KAAAC,gBAAgB,GAAhBA,gBAAgB;IAL3F,KAAAC,WAAW,GAAG,CAAC;IACf,KAAAC,EAAE,GAAG,CAAC;IACN,KAAAC,qBAAqB,GAAwB,EAAE;IAC/C,KAAAC,iBAAiB,GAAsBZ,MAAM,CAACG,iBAAiB,CAAC;IAChE,KAAAU,iBAAiB,GAAY,IAAI;IAE/B,IAAI,CAACP,KAAK,CAACQ,WAAW,CAACC,SAAS,CAACC,MAAM,IAAG;MACxC,IAAI,CAACN,EAAE,GAAGM,MAAM,CAAC,IAAI,CAAC;MACtB,IAAI,CAAC,IAAI,CAACN,EAAE,EAAE;QACZ,IAAI,CAACA,EAAE,GAAG,CAAC;;MAEb,IAAI,CAACD,WAAW,GAAG,CAAC;MACpB,IAAI,CAACE,qBAAqB,GAAG,EAAE,CAAC,CAAC;MACjC,IAAI,CAACM,YAAY,EAAE;IACrB,CAAC,CAAC;EACJ;EAEAC,QAAQA,CAAA;IACNC,MAAM,CAACC,gBAAgB,CAAC,QAAQ,EAAE,IAAI,CAACC,YAAY,CAACC,IAAI,CAAC,IAAI,CAAC,CAAC;EACjE;EAEAD,YAAYA,CAAA;IACV,IAAG,IAAI,CAACR,iBAAiB,EAAC;MAC1B,MAAMU,cAAc,GAAGJ,MAAM,CAACK,WAAW,GAAGL,MAAM,CAACM,OAAO;MAC1D,MAAMC,WAAW,GAAGC,QAAQ,CAACC,eAAe,CAACC,YAAY;MAEzD,IAAIN,cAAc,IAAIG,WAAW,GAAG,GAAG,EAAE;QAEvC,IAAI,CAACjB,WAAW,EAAE;QAClB;QACA,IAAI,CAACQ,YAAY,EAAE;;;EAGzB;EACUA,YAAYA,CAAA;IAClB,IAAI,CAACL,iBAAiB,CAACkB,uBAAuB,CAAC,IAAI,CAACpB,EAAE,EAAE,IAAI,CAACD,WAAW,CAAC,CAACsB,IAAI,CAAEpB,qBAA0C,IAAI;MAC5H,IAAI,CAACA,qBAAqB,CAACqB,IAAI,CAAC,GAAGrB,qBAAqB,CAAC;IAC3D,CAAC,CAAC;EACJ;CACD;AAxCYP,mBAAmB,GAAA6B,UAAA,EAT/BlC,SAAS,CAAC;EACTmC,QAAQ,EAAE,gBAAgB;EAC1BC,UAAU,EAAE,IAAI;EAChBC,OAAO,EAAE,CAACnC,YAAY,EAAEC,0BAA0B,CAAC;EACnDmC,SAAS,EAAE,CAAC,4BAA4B,CAAC;EACzCC,QAAQ,EAAE;;;CAGX,CAAC,C,EACWlC,mBAAmB,CAwC/B;SAxCYA,mBAAmB"},"metadata":{},"sourceType":"module","externalDependencies":[]}